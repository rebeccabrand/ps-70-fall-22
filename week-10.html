<!doctype html>
<html lang="en">
  <head>
  	<title>RLB ðŸš€ PS70</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
		
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="css/style.css">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/arduino-light.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/arduino.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script> 
  </head>
  <body>
		
		<div class="wrapper d-flex align-items-stretch">
			<nav id="sidebar">
				<div class="p-4 pt-5">
		  		<a href="#" class="img logo rounded-circle mb-5" style="background-image: url(images/logo.jpg);"></a>
	        <ul class="list-unstyled components mb-5">
	          <li class="active">
	            <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Class Progress</a>
	            <ul class="collapse list-unstyled" id="homeSubmenu">
                <li>
                    <a href="week-1.html">Week 1: Introduction/Final Project</a>
                </li>
                <li>
                    <a href="week-2.html">Week 2: 2D-Design & Cutting</a>
                </li>
                <li>
                    <a href="week-3.html">Week 3: Mechanical Design</a>
                </li>
                <li>
                  <a href="week-4.html">Week 4: 3D Design & Printing</a>
              </li>
                <li>
                  <a href="week-5.html">Week 5: Microcontroller Programming</a>
              </li>
              <li>
                  <a href="week-6.html">Week 6: Electronic Input Devices</a>
              </li>
              <li>
                  <a href="week-7.html">Week 7: Electronic Output Devices</a>
              </li>
              <li>
                <a href="week-8.html">Week 8: CNC Milling, Molding & Casting</a>
            </li>
              <li>
                <a href="week-9.html">Week 9: Radio, WiFi & Bluetooth</a>
            </li>
            <li>
                <a href="week-10.html">Week 10: Machine Building & End Effectors</a>
            </li>
            <li>
                <a href="week-11.html">Week 11: Computer Programming</a>
            </li>
            <li>
              <a href="week-12.html">Week 12: Wildcard</a>
          </li>
	            </ul>
	          </li>
            <li>
              <a href="index.html">Home</a>
          </li>
	          <li>
	              <a href="about.html">About</a>
	          </li>
	        </ul>

	        <div class="footer">
	        	<p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib.com</a>
						  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
	        </div>

	      </div>
    	</nav>

        <!-- Page Content  -->
        <div id="content" class="p-4 p-md-5">

            <nav class="navbar navbar-expand-lg navbar-light bg-light">
              <div class="container-fluid">
    
                <button type="button" id="sidebarCollapse" class="btn btn-primary">
                  <i class="fa fa-bars"></i>
                  <span class="sr-only">Toggle Menu</span>
                </button>
                <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fa fa-bars"></i>
                </button>
    
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    <li class="nav-item">
                        <a class="nav-link" href="week-1.html">Final Project</a>
                  </ul>
                </div>
              </div>
            </nav>
        <h2 class="mb-4">Week 10: Machine Building & End Effectors</h2>
        <p>This week's assignment was to make a machine that includes at least one stepper motor and to demonstrate that the motor position is calibrated each time you turn it on. I collaborated
          with Felicia Liang, since we used this brief as an opportunity to research and prototype a component of our final project,
          which will be a suminagashi (Japanese ink panting) machine. We decided to prototype the "x-axis arm" of our machine, which 
          will eventually hold another motor-powered arm that will act as the "y-axis".
        </p>
        <div class="row">
            <div class="col">
                <h4>Testing Stepper Motors</h4>
                <p>We started by playing with different stepper motors to understand how they work. Thinking it would be sufficient for our machine, we initially programmed the <a href="https://create.arduino.cc/projecthub/debanshudas23/getting-started-with-stepper-motor-28byj-48-3de8c9">28BYJ-48 stepper motor</a>
                  to move back and forth. 
                  <br>
                  <br>
                  However, we ended up finding a <a href="https://www.youtube.com/watch?v=XYqx5wg4oLU">tutorial for building a CNC drawing machine</a> that would become the inspirational framework for our project.
                  Having initially thought we'd build a large frame similar to Suvin's machine, we found this person's approach to be much more agile and appropriate
                  for our creative purposes. In this example, they use NEMA 17 bipolar stepper motors for more power.
                </p>
            </div>
            <div class="col">
              <img src="images/stepper.gif" height="300px", width="auto">
            </div>
        </div>
        <h4>Building the Arm</h4>
        <p>In order to get the x-axis arm working mechanically, we performed research and collected the requisite materials, including
          toothed pulleys, timing belt, linear railing, a NEMA 17 motor, an A4988 driver and heat shield, and a 12V port and power source. 
          Initially, we laser cut and 3D-printed linear railing parts, but ended up getting the metal piece in the mail on time. 
          We also 3D-printed two base ends - one idle and one that will house the motor - as well as a raft mount for the y-axis.
          Although we anticipate the raft mount dimensions changing, it was a helpful exercise in understanding how the mount will sit upon
          and be powered by the first stepper motor.
        </p>
        <div class="row">
          <div class="col">
            <img src="images/materials.jpeg" height="300px" width="auto">
            <figcaption>SOME 3D-PRINTED PARTS AND OTHER TOOLS.</figcaption>
          </div>
          <div class="col">
              <img src="images/x-axis-mockup.gif" height="300px" width="auto">
            <figcaption>MOVING THE TIMING BELT AND RAFT MOUNT MECHANICALLY.</figcaption>
          </div>
        </div>
        <br>
        <div class="row">
          <h4>Bipolar Stepper Motor Setup</h4> 
           <p>
            After constructing the arm and ensuring the system works without an outside power source, we set up the stepper motor circuit
           to validate it would continue working if we programmed the motor to oscillate between clockwise and counterclockwise movements.
           We also had to solder 12v power source plug to the power and ground wires that would plug into the breadboard.
           </p>
        </div>
        <div class="row">
           <div class="col">
             <video height="300" width="auto" controls>
               <source src="images/x-axis-motor.mp4" type="video/mp4">
             </video>
             <figcaption>STEPPER MOTOR MOVES CLOCKWISE, PAUSES, THEN MOVES COUNTERCLOCKWISE.</figcaption>
           </div> 
           <div class="col">
            <img src="images/stepper_driver_schematic.jpg" height="300px" width="auto">
            <figcaption>SCHEMATIC INCLUDING THE 12V POWER SOURCE, CAPACITOR, AND A4988 DRIVER.</figcaption>
          </div>
         </div> 
        <br>
        <div class="row">
          <h4>Adding the Limit Switch</h4> 
           <p>
            Once we knew the motor moved the mount properly, we adapted different Arduino code snippets online to program the mount to travel clockwise,
            trigger the limit switch, and then travel counterclockwise back to its origin. We soldered the limit switch to power and ground wires and affixed it to the right
            edge of the mount, where it would hit the base and trigger the direction change.
           </p>
        </div>
        <div class="row">
          <div class="col">
            <video height="250" width="auto" controls>
              <source src="images/limit-switch.mp4" type="video/mp4">
            </video>
            <figcaption>STEPPER MOTOR ACCELERATES, HITS LIMIT SWITCH, PAUSES, AND CHANGES DIRECTION.</figcaption>
          </div> 
          <div class="col">
           <img src="images/x-axis-arm.jpg" height="250px" width="auto">
           <figcaption>X-AXIS ARM SYSTEM AND ELECTRONIC PARTS.</figcaption>
         </div>
        </div> 
        <h5>Arduino Code</h5>
        <pre><code class="language-arduino hljs">
          #include <ezButton.h>
            #include <AccelStepper.h>
            
            // Define pin connections
            const int dirPin = 2;
            const int stepPin = 3;
            
            // Define motor interface type
            #define motorInterfaceType 1
            
            #define DIRECTION_CCW 1
            #define DIRECTION_CW  -1
            
            
            #define MAX_POSITION 0x7FFFFFFF // maximum of position we can set (long type)
            
            ezButton limitSwitch(7); // create ezButton object that attach to pin A0;
            
            AccelStepper stepper(motorInterfaceType, stepPin, dirPin);
            
            int direction  = DIRECTION_CW;
            long targetPos = 0;
            
            void setup() {
              Serial.begin(9600);
            
              limitSwitch.setDebounceTime(50); // set debounce time to 50 milliseconds
            
              stepper.setMaxSpeed(1000);   // set the maximum speed
              stepper.setAcceleration(100); // set acceleration
              stepper.setSpeed(300);         // set initial speed
              stepper.setCurrentPosition(0); // set position
            
              targetPos = direction * MAX_POSITION;
              stepper.moveTo(targetPos);
            }
            
            void loop() {
              limitSwitch.loop(); // MUST call the loop() function first
            
              if (limitSwitch.isPressed()) {
                Serial.println(F("The limit switch: TOUCHED"));
                direction *= -1; // change direction
                Serial.print(F("The direction -> "));
                if (direction == DIRECTION_CW)
                  Serial.println(F("CLOCKWISE"));
                else
                  Serial.println(F("ANTI-CLOCKWISE"));
            
                targetPos = direction * MAX_POSITION;
                stepper.setCurrentPosition(0); // set position
                stepper.moveTo(targetPos);
              }
            
              // without this part, the move will stop after reaching maximum position
              if (stepper.distanceToGo() == 0) { // if motor moved to the maximum position
                stepper.setCurrentPosition(0);   // reset position to 0
                stepper.moveTo(targetPos);       // move the motor to maximum position again
              }
            
              stepper.run(); // MUST be called in loop() function
            }
        </code></pre>
</div>
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>